
@{
    ViewBag.Title = "Ventas";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section estilos{
    <style>
        #inner-right {
            max-height: 300px;
            overflow-y: scroll;
        }
    </style>
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#"><i class="fas fa-clipboard"></i> Reportes</a></li>
        <li class="breadcrumb-item active" aria-current="page">Ventas</li>
    </ol>
</nav>

<div class="row">
    <div class="col-sm-12">
        <div class="card border-info">
            <div class="card-header bg-info text-white">
                Reporte de ventas
            </div>
            <div class="card-body">
                <div class="row align-items-end">
                    <div class="col-sm-2">
                        <div class="form-group mb-0">
                            <label for="txtRucProveedor" class="col-form-label col-form-label-sm">Fecha Inicio:</label>
                            <input type="text" class="form-control form-control-sm model" id="txtFechaInicio" name="FechaInicio" autocomplete="off">
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group mb-0">
                            <label for="txtRucProveedor" class="col-form-label col-form-label-sm">Fecha Fin:</label>
                            <input type="text" class="form-control form-control-sm model" id="txtFechaFin" name="FechaFin" autocomplete="off">
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group mb-0">
                            <label for="txtRucProveedor" class="col-form-label col-form-label-sm">Tienda:</label>
                            <select class="form-control form-control-sm model" id="cboTienda" name="Tienda"></select>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group mb-0">
                            <button id="btnBuscar" type="button" class="btn btn-sm btn-primary btn-block"><i class="fas fa-search"></i> Buscar</button>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="row mb-2">
                    <div class="col-sm-12">
                        <button class="btn btn-info float-left" onclick="printData()">
                            <i class="fas fa-print"></i> Imprimir
                        </button>
                    </div>
                </div>
                <div class="row" id="inner-right">
                    <div class="col-sm-12">
                        <table id="tbReporte" class="table table-striped table-bordered table-sm table-responsive-sm" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Fecha Venta</th>
                                    <th>Numero Documento</th>
                                    <th>Tipo Documento</th>
                                    <th>Nombre Tienda</th>
                                    <th>ID Tienda</th>
                                    <th>Nombre Empleado</th>
                                    <th>Cantidad Unidades Vendidas</th>
                                    <th>Cantidad Productos</th>
                                    <th>Total Venta</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    window.onload = function() {
                // Obtener la fecha actual
                var today = new Date();
                
                // Formatear la fecha actual en el formato yyyy-mm-dd
                var formattedToday = String(today.getDate()).padStart(2, '0') + '/' + String(today.getMonth() + 1).padStart(2, '0') + '/' + today.getFullYear();
                
                // Establecer el valor del primer campo de entrada de fecha a la fecha actual
                document.getElementById('txtFechaFin').value = formattedToday;
                
                // Formatear la fecha del primer día del mes actual en el formato yyyy-mm-dd
                var firstDayOfMonth = '01/' + String(today.getMonth() + 1).padStart(2, '0') + '/' + today.getFullYear();
                
                // Establecer el valor del segundo campo de entrada de fecha al primer día del mes actual
                document.getElementById('txtFechaInicio').value = firstDayOfMonth;
            }
</script>
@section scripts{
    <script src="@Url.Content("~/Scripts/Views/Reporte_Venta.js")" type="text/javascript"></script>
}
